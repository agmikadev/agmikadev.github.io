/* --- 1. DEFINE THE ANGLE PROPERTY --- */
/* This allows CSS to animate the variable smoothly from 0deg to 360deg */
@property --angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

.system-container {
  position: absolute; 
  top: 50%; left: 50%;
  transform: translate(-50%, -50%); 
  width: 100%; height: 100%; 
  z-index: 3;
}

.central-star {
  position: absolute;
  top: 0; bottom: 0; left: 0; right: 0; margin: auto; 
  width: 72px; height: 72px;
  background: radial-gradient(circle, #fff 0%, #ffdf00 60%);
  border-radius: 50%;
  box-shadow: 0 0 28px #ffdf00, 0 0 45px #ffdf0040;
  z-index: 10;

  /* Pulse Animation */
  animation: star-pulse 4s ease-in-out infinite;
}

/* --- 2. THE GROUP CONTAINER --- */
.orbit-group {
  position: absolute;
  top: 50%; left: 50%;
  /* No width/height needed, it sits exactly at the center (0,0) */
}

/* --- 3. THE VISUAL RING --- */
.orbit-ring {
  position: absolute;
  top: 50%; left: 50%;
  width: calc(var(--radius) * 2);
  height: calc(var(--radius) * 2);
  border: 1px dashed rgba(100, 100, 255, 0.2);
  border-radius: 50%;
  
  /* cos(65deg) = 0.4226. 
     Scaling Y by this amount gives us the exact 65-degree 3D perspective.
  */
  transform: translate(-50%, -50%) scaleY(0.4226);
  pointer-events: none;
}

/* --- 4. THE PLANET & TRIGONOMETRY --- */
.planet-link {
  position: absolute;
  top: 50%; left: 50%;
  text-decoration: none;
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
  outline: none;
  -webkit-tap-highlight-color: transparent; /* Removes blue flash on mobile */
  
  /* Start the animation */
  animation: orbit var(--speed) linear infinite;

  /* Perspective Refinement */
  z-index: calc(sin(var(--angle)) * var(--r-val) + 1000);

  /* THE MAGIC:
     X = cos(angle) * radius
     Y = sin(angle) * radius * 0.4226 (The 65deg tilt squish)
  */
  transform: translate(
    calc(cos(var(--angle)) * var(--radius) - 50%), 
    calc(sin(var(--angle)) * var(--radius) * 0.4226 - 50%)
  );
}

.planet {
  width: var(--p-size);
  height: var(--p-size);
  background-color: var(--p-color);
  border-radius: 50%;
  box-shadow: inset -5px -5px 10px rgba(0,0,0,0.5), 0 0 10px var(--p-color);
  position: relative;
  transition: transform 0.2s ease;
}

.planet-label {
  position: absolute;
  top: -30px; left: 50%;
  transform: translateX(-50%);
  color: #a0e1ff;
  font-size: 1rem; 
  font-family: monospace;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;

  /* Label Scaling */
  transform: translateX(-50%) scale(calc(1 + sin(var(--angle)) * 0.35));
}

/* --- 5. THE KEYFRAMES --- */
@keyframes orbit {
  from { --angle: 0deg; }
  to { --angle: 360deg; }
}

@keyframes star-pulse {
  0%, 100% {
    transform: scale(1);
    /* Baseline glow */
    box-shadow: 0 0 28px #ffdf00, 0 0 45px #ffdf0040; 
  }
  50% {
    transform: scale(1.05);
    /* Expanded, brighter glow */
    box-shadow: 0 0 25px #ffdf00, 0 0 55px #ffdf0060;
  }
}

/* --- 6. HOVER EFFECTS --- */
.planet-link:hover {
  animation-play-state: paused;
  z-index: 9999;
}

.planet-link:hover .planet {
  transform: scale(1.3);
}

.planet-link:hover .planet-label {
  opacity: 1;
}